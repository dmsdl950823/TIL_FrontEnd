- [Texture ë€?](#texture-ë€)
  - [Texture type](#texture-type)
  - [PBR](#pbr)
- [texture ë¡œë“œí•˜ê¸°](#texture-ë¡œë“œí•˜ê¸°)
  - [image URL ê°€ì ¸ì˜¤ê¸°](#image-url-ê°€ì ¸ì˜¤ê¸°)
  - [image load í•˜ê¸°](#image-load-í•˜ê¸°)
    - [native javascript ì´ìš©í•˜ê¸°](#native-javascript-ì´ìš©í•˜ê¸°)
    - [TextureLoader ì‚¬ìš©í•˜ê¸°](#textureloader-ì‚¬ìš©í•˜ê¸°)
    - [LoadingManager ì‚¬ìš©í•˜ê¸°](#loadingmanager-ì‚¬ìš©í•˜ê¸°)
  - [ì „ì²´ ì½”ë“œ](#ì „ì²´-ì½”ë“œ)
- [UV unwrapping](#uv-unwrapping)
- [texture ë³€í˜•í•˜ê¸°](#texture-ë³€í˜•í•˜ê¸°)
    - [ë°˜ë³µ](#ë°˜ë³µ)
    - [Offset](#offset)
    - [Rotation](#rotation)
- [Filteringê³¼ MipMapping](#filteringê³¼-mipmapping)
  - [Minification filter](#minification-filter)
  - [Magnification filter](#magnification-filter)
  - [ì „ì²´ ì½”ë“œ](#ì „ì²´-ì½”ë“œ-1)
- [Txture í˜•ì‹(format) ê³¼ ìµœì í™”(optimisation)](#txture-í˜•ì‹format-ê³¼-ìµœì í™”optimisation)
  - [ë¬´ê²Œ](#ë¬´ê²Œ)
  - [í¬ê¸°](#í¬ê¸°)
  - [ë°ì´í„°](#ë°ì´í„°)
- [Texture ì†ŒìŠ¤ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” ê³³](#texture-ì†ŒìŠ¤ë¥¼-ì–»ì„-ìˆ˜-ìˆëŠ”-ê³³)


# Texture ë€?

TextureëŠ” geometryë¥¼ ë®ëŠ” 'image'ì…ë‹ˆë‹¤. ë§ì€ texture íƒ€ì…ì€ ë‹¨ì§€ ì»¬ëŸ¬ë§Œì‰ ì•„ë‹ˆë¼, **geometryì˜ í‘œë©´ì— ë‹¤ì–‘í•œ íš¨ê³¼ë¥¼ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

textureë¥¼ ê³µë¶€í•˜ê¸°ì— ê°€ì¥ ì¼ë°˜ì ì¸ ì˜ˆì œëŠ” JoÃ£o Pauloì˜ [door texture](https://3dtextures.me/2019/04/16/door-wood-001/) ì…ë‹ˆë‹¤.

## Texture type

texture íƒ€ì…ì€ ì—¬ëŸ¬ê°€ì§€ê°€ ìˆì§€ë§Œ ì£¼ë¡œ í•˜ë‹¨ì˜ íƒ€ì…ë“¤ì„ ì œì¼ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.
``` 
    - Color
    - Alpha
    - Height
    - Normal
    - Ambient occlusion
    - Metalness
    - Roughness
```

* **Color** ë˜ëŠ” albedo
  
  <img src="https://threejs-journey.xyz/assets/lessons/11/color.jpg" width=300/>

  > albedo(ë‹¬/í–‰ì„±ì´ ë°˜ì‚¬í•˜ëŠ” íƒœì–‘ ê´‘ì„ ì˜ ë¹„ìœ¨) textureëŠ” ê°€ì¥ ê°„ë‹¨í•©ë‹ˆë‹¤. textureì˜ pxì„ ê°€ì§€ë©° geometryì— ì ìš©í•´ì¤ë‹ˆë‹¤.

* **Alpha**
  
  <img src="https://threejs-journey.xyz/assets/lessons/11/alpha.jpg" width=300/>

  > alpha textureëŠ” whiteëŠ” visible, blackì€ unvisibleí•˜ë„ë¡ ë§Œë“¤ì–´ì£¼ëŠ” í‘ë°± ì´ë¯¸ì§€ì…ë‹ˆë‹¤.

* **Height**
  
  <img src="https://threejs-journey.xyz/assets/lessons/11/height.png" width=300/>

  > height textureëŠ” ë¬¼ì²´ì˜ ê²½ê°(ë¯¸ì„¸í•œ ë¬¼ì²´ì˜ ë†’ì´)ì„ ìƒì„±í•˜ê¸° ìœ„í•´ ê¼­ì§“ì ì„ ì´ë™ì‹œí‚¤ëŠ” í‘ë°± ì´ë¯¸ì§€ì…ë‹ˆë‹¤.

* **Normal**
  
  <img src="https://threejs-journey.xyz/assets/lessons/11/normal.jpg" width=300/>

  > normal textureëŠ” ì‘ì€ ë””í…Œì¼ì„ ë”í•´ì£¼ëŠ”ë°, ê¼­ì§“ì ì€ ì´ë™í•˜ì§€ ì•Šì§€ë§Œ ë‹¤ë¥´ê²Œ ìœ„ì¹˜í•´ìˆëŠ” ë¬¼ì²´ì˜ ë©´ì— ë¯¸ì„¸í•œ ë¹›ì„ ë¹„ì¶°ì£¼ë„ë¡ í•©ë‹ˆë‹¤. Normal textureëŠ” geometryë¥¼ ë” ì˜ê²Œ ë‚˜ëˆŒ í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì— ì¢‹ì€ performanceë¥¼ ìœ ì§€í•˜ë©´ì„œ ë””í…Œì¼ì„ ë”í•˜ëŠ”ë° ì•„ì£¼ ìœ ìš©í•©ë‹ˆë‹¤. 

* **Ambient occlusion**
  
  <img src="https://threejs-journey.xyz/assets/lessons/11/ambientOcclusion.jpg" width=300/>

  > ambient occlusion textureëŠ” í‘œë©´ì˜ ìì˜í•œ í‹ˆë‚´ë¶€ì— ê°€ì§œ ê·¸ë¦¼ìë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” í‘ë°± ì´ë¯¸ì§€ì…ë‹ˆë‹¤.

* **Metalness**
  
  <img src="https://threejs-journey.xyz/assets/lessons/11/metalness.jpg" width=300/>

  > metalness textureëŠ” ê¸ˆì†ë¶€ë¶„(white), ê¸ˆì†ì´ ì•„ë‹Œ ë¶€ë¶„(black)ì„ êµ¬ì²´í™”í•´ì£¼ëŠ” í‘ë°± ì´ë¯¸ì§€ì…ë‹ˆë‹¤. ì´ ì •ë³´ëŠ” reflectionì„ ë§Œë“œëŠ”ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.

* **Roughness**
  
  <img src="https://threejs-journey.xyz/assets/lessons/11/roughness.jpg" width=300/>

  > roughnessëŠ” metalnessì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” í‘ë°±ì´ë¯¸ì§€ì´ë©°, ê±°ì¹œ ë¶€ë¶„(white)ê³¼ ë¶€ë“œëŸ¬ìš´ ë¶€ë¶„(black) ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤. ì´ ì •ë³´ëŠ” lightë¥¼ ì†Œë©¸ì‹œí‚¤ëŠ”ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.
  >
  > ì˜ˆë¥¼ë“¤ì–´ ì¹´í˜íŠ¸ëŠ” ì•„ì£¼ ê±°ì¹ ì–´ì„œ ë°˜ì‚¬ê´‘ì„ ë³¼ ìˆ˜ ì—†ì§€ë§Œ, ë¬¼ì  í‘œë©´ì€ ì•„ì£¼ ë¶€ë“œëŸ¬ì›Œì„œ ë°˜ì‚¬ê´‘ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## PBR

ì´ ëª¨ë“  textureë“¤ì€(íŠ¹ë³„íˆ metalnessì™€ roughness) **PBR ì›ì¹™** ë¥¼ ë”°ë¦…ë‹ˆë‹¤. PBRì€ **ë¬¼ë¦¬ì  ê¸°ë°˜ ë Œë”ë§**ì…ë‹ˆë‹¤. ì´ê²ƒì€ ì§„ì§œê°™ì€ ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ ë‚´ê¸° ìœ„í•˜ì—¬ real-life directionì„ ë”°ë¥´ëŠ” ê²½í–¥ì´ ìˆëŠ” ë§ì€ í…Œí¬ë‹‰ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

ë‹¤ë¥¸ ë§ì€ í…Œí¬ë‹‰ì´ ìˆì§€ë§Œ PBRì€ ì§„ì§œê°™ì€ ë Œë”ë§ì„ êµ¬ì‚¬í•˜ê¸° ìœ„í•œ í‘œì¤€ì´ ë˜ê³ ìˆìŠµë‹ˆë‹¤. - software, engines, libraryë“¤ì´ ì´ í…Œí¬ë‹‰ì„ ì‚¬ìš©ì¤‘ì…ë‹ˆë‹¤.

ê´€ë ¨ ë¬¸ì„œ

* [basic theory of phisically based rendering](https://marmoset.co/posts/basic-theory-of-physically-based-rendering/)
* [phisically based rendering and you can too](https://marmoset.co/posts/physically-based-rendering-and-you-can-too/)



# texture ë¡œë“œí•˜ê¸°
## image URL ê°€ì ¸ì˜¤ê¸°

textureë¥¼ ë¡œë“œí•˜ê¸° ìœ„í•´ì„œëŠ” ì´ë¯¸ì§€ íŒŒì¼ì˜ URLì´ í•„ìš”í•©ë‹ˆë‹¤.

`/static/` í´ë” ì•ˆì—ìˆëŠ” ì´ë¯¸ì§€ë“¤ì„ `/static` ì—†ì´ ê°„ë‹¨í•œ URL pathë¥¼ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <sub>(Webpackì—ì„œë§Œ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤. ë‹¤ë¥¸ bundlerë¥¼ ì‚¬ìš©í• ê²½ìš° ì ìš© ì•ˆë¨)</sub>

``` js
    // 1. import ì‹œí‚¤ëŠ” ë°©ë²•
    import imageSource from '/image.png'

    // 2. /static ì—†ì´ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•
    const imgSrc = '/image.png'
```

## image load í•˜ê¸°

### native javascript ì´ìš©í•˜ê¸°
vanilla js ë¥¼ ì´ìš©í•˜ì—¬ imageê°€ ë¡œë“œëœ ê²½ìš° textureë¥¼ ë„í¬í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

``` js
    // texture ìƒì„±
    const image = new Image()
    const texture = new THREE.Texture(image)
    image.addEventListener('load', () => {
        texture.needsUpdate = true
    })
    image.src = '/textures/door/color.jpg'

    // ...

    // Object
    // texture ì‚¬ìš©
    const material = new THREE.MeshBasicMaterial({ map: texture })
```

<img src="https://threejs-journey.xyz/assets/lessons/11/step-01.png" width=400>

### TextureLoader ì‚¬ìš©í•˜ê¸°

vanilla js ë¥¼ ì‚¬ìš©í•˜ëŠ” í…Œí¬ë‹‰ë„ ìˆì§€ë§Œ, [TextureLoader](https://threejs.org/docs/index.html#api/en/loaders/TextureLoader)ë¥¼ ì‚¬ìš©í•˜ëŠ” ë” ê°„ë‹¨í•œ ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤. 

``` js
    const textureLoader = new THREE.TextureLoader()
    const texture = textureLoader.load('/textures/door/color.jpg')
```

ë‚´ë¶€ì ìœ¼ë¡œ Three.jsëŠ” imageë¥¼ ë¡œë“œí•˜ê¸° ì „ì— ì¤€ë¹„ê°€ ë˜ë©´ textureë¥¼ í•œë²ˆ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

TextureLoader í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ ë§Œìœ¼ë¡œë„ ë§ì€ textureë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

``` js
    const textureLoader = new THREE.TextureLoader()
    const texture = textureLoader.load('/textures/door/.jpg')
    const alphaTexture = textureLoader.load('/textures/door/alpha.jpg')
    const heighTexture = textureLoader.load('/textures/door/height.jpg')
    const normalTexture = textureLoader.load('/textures/door/normal.jpg')
    // ....
```

`load()` 2, 3, 4 ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ëŠ” í•´ë‹¹ ì´ë²¤íŠ¸ë“¤ì„ í˜¸ì¶œí•˜ëŠ” callback í•¨ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤.

* `load` :: imageê°€ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œëœ ê²½ìš°
* `progress` :: loadingì´ ì§„í–‰ì¤‘ì¼ ë•Œ
* `error` :: ë¬´ì–¸ê°€ ì˜ëª»ëœ ê²½ìš°

``` js
    const textureLoader = new THREE.TextureLoader()
    const texture = textureLoader.load(
        '/textures/door/color.jpg',
        () => console.log('loading finished'),     // load
        () => console.info('loading progressing'), // progress
        () => console.error('loading error')       // error
    )
```

### LoadingManager ì‚¬ìš©í•˜ê¸°

ë§ˆì§€ë§‰ìœ¼ë¡œ, ë¡œë“œí•  ë§ì€ imageê°€ ìˆëŠ” ê²½ìš° [LoadingManater](https://threejs.org/docs/index.html#api/en/loaders/managers/LoadingManager)ë¥¼ ì´ìš©í•˜ì—¬ eventë¥¼ ì§§ê³  ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

``` js
    const loadingManager = new THREE.LoadingManager()
    const textureLoader = new THREE.TextureLoader(loadingManager)
```

`onStart`, `onLoad`, `onProgress`, `onError` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ eventë¥¼ ì¶”ì í•  ìˆ˜  ìˆìŠµë‹ˆë‹¤.

``` js

    const loadingManager = new THREE.LoadingManager()
    loadingManager.onStart = () => console.log('onStart')
    loadingManager.onProgress = () => console.log('onProgress')
    loadingManager.onLoad = () => console.log('onLoad')
    loadingManager.onError = () => console.log('onError')
    const textureLoader = new THREE.TextureLoader(loadingManager)
```

ì´ì œ ì›í•˜ëŠ” ëª¨ë“  imageë¥¼ í•œêº¼ë²ˆì— ë¡œë“œí•œ í›„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì „ì²´ ì½”ë“œ

``` js

    /**
     * ğŸ§¨ Texture
     */

    const loadingManager = new THREE.LoadingManager()

    loadingManager.onStart = () => console.log('onStart')
    loadingManager.onProgress = () => console.log('onProgress') // textureê°€ ì´ 6ê°œ - 6 ë²ˆ í˜¸ì¶œ!
    loadingManager.onLoad = () => console.log('onLoad')
    loadingManager.onError = () => console.log('onError')

    const textureLoader = new THREE.TextureLoader(loadingManager)
    const colorTexture = textureLoader.load(imgSrc)
    const alphaTexture = textureLoader.load('/textures/door/alpha.jpg')
    const heighTexture = textureLoader.load('/textures/door/height.jpg')
    const normalTexture = textureLoader.load('/textures/door/normal.jpg')
    const ambientOcclusionTexture = textureLoader.load('/textures/door/ambientOcclusion.jpg')
    const metalnessTexture = textureLoader.load('/textures/door/metalness.jpg')
    const roughnessTexture = textureLoader.load('/textures/door/roughness.jpg')

    // Base...
    // Canvas...
    // Scene...

    /**
     * Object
     */
    const geometry = new THREE.BoxGeometry(1, 1, 1)
    const material = new THREE.MeshBasicMaterial({ map: colorTexture }) // ğŸˆ
    const mesh = new THREE.Mesh(geometry, material)
    scene.add(mesh)
    
    // ...
```

# UV unwrapping


<img src="https://threejs-journey.xyz/assets/lessons/11/uvUnwrapping1.png" width=400/>

objectì—(íŠ¹íˆ ë³µì¡í•œ object) textureë¥¼ ì…íˆëŠ”ê²ƒì€ ë‹¤ì†Œ ê¹Œë‹¤ë¡­ìŠµë‹ˆë‹¤. 
>   ex. SphereGeometry, ConeGeometry, TorusGeometry ....

ì´ëŸ°ê²½ìš° textureëŠ” ëŠ˜ì–´ë‚˜ê³  ë‹¤ë¥¸ë°©ì‹ìœ¼ë¡œ geometryë¥¼ ê°ì‹¸ê¸° ìœ„í•´ì„œ ë¹„í‹€ì–´ì§‘ë‹ˆë‹¤. ì´ê²ƒì„ **UV unwrapping** ì´ë¼ê³  í•˜ëŠ”ë°, textureê°€ í™œì§ í´ì§„ ì „ê°œë„ë¼ê³  ìƒê°í•˜ë©´ ì‰½ìŠµë‹ˆë‹¤.

ê°„ë‹¨í•œ objectëŠ” `geometry.attributes.uv` í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•˜ì—¬ UV 2D ì¡°ì§(UV ì „ê°œë„)ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

``` js
    console.log(geometry.attributes.uv)
```

<img src="https://threejs-journey.xyz/assets/lessons/11/uvUnwrapping2.png" width=400>

ê·¸ëŸ¬ë‚˜ ë³µì¡í•œ/ì§ì ‘ ì œì‘í•œ geometryì— textureë¥¼ ì…íˆê³  ì‹¶ì„ ê²½ìš°ì—ëŠ” íŠ¹ë³„í•œ UV ì „ê°œë„ê°€ í•„ìš”í•©ë‹ˆë‹¤.

# texture ë³€í˜•í•˜ê¸°

### ë°˜ë³µ

textureë¥¼ `repeat` í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•˜ì—¬ ë°˜ë³µì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `x` `y` í”„ë¡œí¼í‹°ë¥¼ ê°€ì§€ëŠ” [Vector2](https://threejs.org/docs/index.html#api/en/math/Vector2) ë¥¼ ì´ìš©í•©ë‹ˆë‹¤.

<img src="./threejs_images/11-texture-repeat.PNG" width=300/>

``` js
    const colorTexture = textureLoader.load('/textures/door/color.jpg')

    // transform
    colorTexture.repeat.x = 2
    colorTexture.repeat.y = 3
```

ì´ë¯¸ì§€ì™€ ê°™ì´ textureëŠ” ì‘ì§€ë§Œ repeatí•˜ì§€ ì•Šê³ , pixelì´ ëŠ˜ì–´ë‚œê²ƒ ì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ repeat í•˜ì§€ ì•Šë„ë¡ ì„¤ì •ë˜ì–´ìˆì–´ì„œ ê·¸ë ‡ìŠµë‹ˆë‹¤. ì´ê²ƒì„ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œëŠ” `THREE.RepeatWrapping` constant ë¥¼ ì‚¬ìš©í•˜ì—¬ `wrapS` (x ì¶•)ì™€ `wrapT` (y ì¶•) í”„ë¡œí¼í‹°ë¥¼ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤. 


<img src="./threejs_images/11-texture-repeatwrapping.PNG" width=300/>


``` js
    // transform
    colorTexture.WrapS = THREE.RepeatWrapping
    colorTexture.WrapT = THREE.RepeatWrapping
```

ê±°ìš¸ì²˜ëŸ¼ ë§ˆì£¼ë³´ê²Œ ë°©í–¥ì„ ë°”ê¿€ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

<img src="./threejs_images/11-texture-mirroredRepeatWrapping.PNG" width=400/>

``` js
    colorTexture.wrapS = THREE.MirroredRepeatWrapping
    colorTexture.wrapT = THREE.MirroredRepeatWrapping
```

### Offset

[Vector2](https://threejs.org/docs/index.html#api/en/math/Vector2)ì˜ `x` `y` í”„ë¡œí¼í‹°ë¥¼ í¬í•¨í•œ `offset` í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•˜ì—¬ textureë¥¼ ì˜¤í”„ì…‹ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

<img src="./threejs-images/11-texture-offset.PNG" width=300/>

``` js
    colorTexture.offset.x = 0.5
    colorTexture.offset.y = 0.5
```

### Rotation

<img src="./threejs_images/11-texture-rotation.PNG" width=300/>

`rotation` í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•´ì„œ textureë¥¼ íšŒì „í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

``` js
    colorTexture.rotation = Math.PI * 0.25
```

`offset`ê³¼ `repeat` í”„ë¡œí¼í‹°ë¥¼ ì œê±°í•˜ë©´, rotationì€ bottom, left ëª¨ì„œë¦¬ ì£¼ë³€ì„ ê°ì‹¼ë‹¤ëŠ” ê²ƒ ì„ ë³¼ ìˆ˜ ìˆëŠ”ë°,

<img src="./threejs_images/11-texture-rotation-bottomleft.PNG" width=300/>


rotationì˜ ì¤‘ì‹¬ì (pivot)ì„ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´, Vector2 ì—ì„œ ì œê³µí•˜ëŠ” `center` propertyë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<img src="./threejs_images/11-texture-rotation-center.PNG" width=300/>

``` js
    // offset, repeat ì œê±°
    colorTexture.rotation = Math.PI * 0.25
    colorTexture.center.x = 0.5
    colorTexture.center.y = 0.5
```

# Filteringê³¼ MipMapping

<img src="https://threejs-journey.xyz/assets/lessons/11/step-09.png" width=400>

cubeì˜ ìƒë‹¨ ëª¨ì„œë¦¬ë©´ì€ ê±°ì˜ ê°€ë ¤ì ¸ìˆì§€ë§Œ ì•„ì£¼ íë¦¿í•œ textureë¥¼ ë³¼ ìˆ˜ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ filteringê³¼ MIP mapping ë•Œë¬¸ì…ë‹ˆë‹¤.

Mip mappingì€ 1x1 textureê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ ì—°ì†ì ìœ¼ë¡œ ë” ì‘ì€ ë²„ì „ì„ ë§Œë“œëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ì´ ëª¨ë“  ë‹¤ì–‘í•œ textureë“¤ì€ GPUì— ë³´ë‚´ì§€ê³ , GPUëŠ” ê°€ì¥ ì ì ˆí•œ ë²„ì „ì˜ textureë¥¼ ì„ íƒí• ê²ƒ ì…ë‹ˆë‹¤.

Three.jsì™€ GPUëŠ” ì´ë¯¸ ì´ ëª¨ë“ ê²ƒì„ ì²˜ë¦¬ í•˜ê³ ìˆì–´ì„œ, ì–´ë–¤ filter ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•  ê²ƒì¸ì§€ ì„¤ì •í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤. minification filterì™€ magnification filter ë‘ê°€ì§€ ì•Œê³ ë¦¬ì¦˜ì´ ìˆìŠµë‹ˆë‹¤.

## Minification filter

minification filterëŠ” **textureì˜ pixelì´ renderí•˜ëŠ” pixel ë³´ë‹¤ ë” ì‘ì„ë•Œ ë°œìƒ**í•©ë‹ˆë‹¤. ë‹¤ë¥¸ë§ë¡œ, textureê°€ ì˜¤ë¸Œì íŠ¸ì˜ í‘œë©´ë³´ë‹¤ ë„ˆë¬´ í° ê²½ìš°ì…ë‹ˆë‹¤.

`minFilter` í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•˜ì—¬ textureì˜ minification filterë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì„¤ì • ê°€ëŠ¥í•œ 6ê°œì˜ ê°’ë“¤ì´ ìˆìŠµë‹ˆë‹¤.

* `THREE.LinearFilter`
* `THREE.NearestFilter`
* `THREE.NearestMipmapNearestFilter`
* `THREE.NearestMipmapLinearFilter`
* `THREE.LinearMipmapNearestFilter`
* `THREE.LinearMipmapLinearFilter` - default


``` js
  colorTexture.minFilter = THREE.NearestFilter
```

ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •ë˜ì–´ìˆëŠ” ê°’ì´ ë§ˆìŒì— ë“¤ì§€ ì•Šì„ê²½ìš°, ë‹¤ë¥¸ filterë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë³´ì´ëŠ” textureëŠ”  moirÃ© patterns ë¼ê³  ë¶ˆë¦¬ë©°, ë³´í†µ í”¼í•˜ê³ ì‹¶ì–´í•˜ëŠ” í˜„ìƒì…ë‹ˆë‹¤.

<div style="overflow: hidden">
  <img style="float:left" src="./threejs_images/11-texture-filter-LinearFilter.PNG" width=200/>
  <img style="float:left" src="./threejs_images/11-texture-filter-NearestFilter.PNG" width=200/>
  <img style="float:left" src="./threejs_images/11-texture-filter-NearestMipmapNearestFilter.PNG" width=200/>
  <img style="float:left" src="./threejs_images/11-texture-filter-NearestMipmapLinearFilter.PNG" width=200/>
  <img style="float:left" src="./threejs_images/11-texture-filter-LinearMipmapNearestFilter.PNG" width=200/>
  <img style="float:left" src="./threejs_images/11-texture-filter-LinearMipmapLinearFilter.PNG" width=200/>
</div>

<img src="https://upload.wikimedia.org/wikipedia/commons/0/03/Moir%C3%A9_pattern.png" />

## Magnification filter

Maginfication filterëŠ” minification filterë‘ ë¹„ìŠ·í•˜ì§€ë§Œ **render pixelë³´ë‹¤ texture pixelì´ ë” í¬ë‹¤ëŠ” ê²ƒ** ì…ë‹ˆë‹¤. ë‹¤ë¥¸ë§ë¡œ, textureê°€ ì˜¤ë¸Œì íŠ¸ì˜ í‘œë©´ í¬ê¸°ë³´ë‹¤ ë„ˆë¬´ ì‘ì„ ê²½ìš°ì…ë‹ˆë‹¤.

<img src="https://threejs-journey.xyz/assets/lessons/11/step-12.png" width="400">

 ë³´ì—¬ì§€ëŠ” í…ìŠ¤ì³ëŠ” ì˜¤ë¸Œì íŠ¸ì˜ í‘œë©´ í¬ê¸°ë³´ë‹¤ ì‘ì€ texxture ë•Œë¬¸ì— ì´ë¯¸ì§€ê°€ ëŠ˜ì–´ë‚˜ ê²½ê³„ê°€ ëšœë ·í•˜ì§€ì•ŠìŠµë‹ˆë‹¤.


textureì˜ magnification filterë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ì„  `magFilter` í”„ë¡œí¼í‹°ë¥¼ ì´ìš©í•´ì•¼í•©ë‹ˆë‹¤.

ì„¤ì • ê°€ëŠ¥í•œ 2 ê°œì˜ ê°’ì´ ìˆìŠµë‹ˆë‹¤.

* `THREE.NearestFilter`
* `THREE.LinearFilter` - default

``` js
  colorTexture.magFilter = THREE.NearestFilter
```

<img src="https://threejs-journey.xyz/assets/lessons/11/step-13.png" width="400" />

ì´ ëª¨ë“  filterë“¤ì— ê´€í•˜ì—¬ ë§ë¶™ì´ìë©´, `THREE.NearestFilter` ê°€ ë‹¤ë¥¸ filter ë“¤ ë³´ë‹¤ ë” ê°€ë³ìŠµë‹ˆë‹¤. ì‚¬ìš©í•  ë•ŒëŠ” ë” ë‚˜ì€ í¼í¬ë¨¼ìŠ¤ë¥¼ ê³ ë ¤í•´ì•¼í•©ë‹ˆë‹¤.

**mipmapì„ `minFilter` í”„ë¡œí¼í‹°ë¥¼ ìœ„í•´ì„œë§Œ ì‚¬ìš©í•˜ì„¸ìš”.** `THREE.NearestFilter`ë¥¼ ì‚¬ìš©í•  ê²½ìš°, mipmapì€ í•„ìš”í•˜ì§€ì•Šìœ¼ë¯€ë¡œ `generateMipmaps` í”„ë¡œí¼í‹°ë¥¼ `false` ë¡œ ë¹„í™œì„±í™” ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ì‘ì—…ì€ GPU ì‘ì—…ì„ ê°€ë³ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

``` js
  colorTexture.generateMipmaps = false
  colorTexture.minFilter = THREE.NearestFilter
```

**ì ë‹¹í•œ í…ìŠ¤ì³ í¬ê¸°ë¥¼ ì„¤ì •í•´ì•¼ í¼í¬ë¨¼ìŠ¤ì— ì¢‹ì€ ì˜í–¥ì„ ì¤€ë‹¤ëŠ” ê²ƒì„ ìŠì§€ë§ˆì„¸ìš”!!**

## ì „ì²´ ì½”ë“œ
``` js
  
/**
 * ğŸ§¨ Texture
 */

// loadingManager ...

const textureLoader = new THREE.TextureLoader(loadingManager)
const colorTexture = textureLoader.load(imgSrc)

// texture setting ...

colorTexture.generateMipmaps = false
colorTexture.minFilter = THREE.LinearFilter

colorTexture.magFilter = THREE.NearestFilter

// ...
```

# Txture í˜•ì‹(format) ê³¼ ìµœì í™”(optimisation)

textureë¥¼ ì¤€ë¹„í•  ë•Œ, ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•´ì•¼í•  3 ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

* ë¬´ê²Œ - weight
* í¬ê¸° - size / resolution
* ë°ì´í„° - data

## ë¬´ê²Œ

ì œì‘ëœ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë°©ë¬¸í•  ì‚¬ìš©ìëŠ” í•´ë‹¹ textureë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ìŠµë‹ˆë‹¤. ì›¹ì—ì„œëŠ” `.jpg` (ì¡°ê¸ˆ ì†ìƒë˜ì—ˆì§€ë§Œ ê°€ë³ìŠµë‹ˆë‹¤) ë‚˜ `.png` (ì†ìƒì€ ì—†ì§€ë§Œ ë³´í†µ ë¬´ê²ìŠµë‹ˆë‹¤) ë¥¼ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.

ê°€ëŠ¥í•œí•œ ê°€ë²¼ìš°ë©´ì„œ í—ˆìš©ê°€ëŠ¥í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤. [TinyPNG](https://tinypng.com/) ê°™ì€ ì›¹ì‚¬ì´íŠ¸ë¥¼ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì••ì¶•í•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.

## í¬ê¸°

textureì˜ ê° pixelì€ ì´ë¯¸ì§€ì˜ ë¬´ê²Œì™€ ìƒê´€ ì—†ì´ GPUì— ì €ì¥ë©ë‹ˆë‹¤. í•˜ë“œë“œë¼ì´ë¸Œ ì²˜ëŸ¼, GPUëŠ” ì €ì¥ê³µê°„ì— ì œí•œì´ ìˆìŠµë‹ˆë‹¤. ìë™ìœ¼ë¡œ ìƒì„±ëœ mip mapping ì´ ì €ì¥ë˜ì–´ì•¼ í•˜ëŠ” pixelì˜ í¬ê¸°ë¥¼ ì¦ê°€ì‹œí‚¤ê¸° ë•Œë¬¸ì— ë” ëŠë ¤ì§ˆ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

**ê°€ëŠ¥í•œí•œ ì´ë¯¸ì§€ì˜ í¬ê¸°ë¥¼ ì¤„ì—¬ì„œ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.**

ìƒë‹¨ì˜ mip mappingì—ì„œ ì„¤ëª…í–ˆë‹¤ì‹œí”¼, Three.js ëŠ” 1x1 ì´ ë  ë•Œê¹Œì§€ ê³„ì†í•´ì„œ ë” ì‘ì€ ì‚¬ì´ì¦ˆì˜ textureë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ ë•Œë¬¸ì—, textureì˜ width, heightëŠ” ì œê³±ì´ì–´ì•¼ í•©ë‹ˆë‹¤. Three.jsê°€ textureë¥¼ 2ë¡œ ë‚˜ëˆ„ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì‚¬í•­ì€ í•„ìˆ˜ì ì…ë‹ˆë‹¤.
> ex) `512x512`, `1024x1024`, `512x2048`
> 
> `512`, `1024`, `2048` ì€ 1 ì´ ë  ë•Œê¹Œì§€ 2ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë§Œì•½ widthë‚˜ height ê°€ ì œê³± ê°’ê³¼ëŠ” ë‹¤ë¥´ë‹¤ë©´ Three.jsëŠ” ì œê³±ê°’ê³¼ ë¹„ìŠ·í•˜ë„ë¡ ê°’ì„ ëŠ˜ë¦¬ë¯€ë¡œ, ë¹„ì£¼ì–¼ì ìœ¼ë¡œ ì¢‹ì§€ì•Šì€ ê²°ê³¼ê°€ ë‚˜ì˜¤ë©°, consoleì— warningì„ ì–»ê²Œë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

## ë°ì´í„°

ì•„ì§ í…ŒìŠ¤íŠ¸í•´ë³´ì§„ ì•Šì•˜ì§€ë§Œ, textureë„ íˆ¬ëª…ë„ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. jpg íŒŒì¼ì´ ì•ŒíŒŒ ì±„ë„ì„ ê°€ì§€ê³ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— pngë¥¼ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ë” ì„ í˜¸ë©ë‹ˆë‹¤. (ë˜ëŠ” ë‹¤ìŒ ë ˆìŠ¨ì—ì„œ alpha map  ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤) 

normal texture ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ê°ê°ì˜ pixelì˜ red, green, blue ì±„ë„ì˜ ì •í™•í•œ ê°’ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ´ ê²½ìš°, ì†ìƒì—†ëŠ” íŒŒì¼ì´ ê°’ì„ ìœ ì§€ì‹œì¼œì¤„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— png íŒŒì¼ì´ í•„ìš”í•©ë‹ˆë‹¤.

# Texture ì†ŒìŠ¤ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” ê³³

ì™„ë²½í•œ textureë¥¼ ì°¾ëŠ”ê²ƒì€ ì–´ë µì§€ë§Œ, ì œê³µí•˜ëŠ” ì›¹ ì‚¬ì´íŠ¸ë“¤ì´ ë§ìŠµë‹ˆë‹¤.

* poliigon.com
* 3dtextures.me
* arroway-textures.ch

í¬í† ìƒµê°™ì€ 2D ì†Œí”„íŠ¸ì›¨ì–´ë¡œ ì§ì ‘ textureë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆê³ , [Substance Designer](https://www.substance3d.com/products/substance-designer/) ê³¼ ê°™ì€ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ ë” ì§„ì§œê°™ì€ textureë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
